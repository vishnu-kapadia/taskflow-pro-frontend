<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Vishnu Kapadia">
    <meta name="description" content="TaskFlow Pro login page">
    <meta name="keywords" content="Login, TaskFlow Pro">
    <title>Login - TaskFlow Pro</title>
    <link rel="stylesheet" href="css/styles.css" type="text/css">
</head>

<body>
    <main>
        <h1>Sign in</h1>

        <!-- Form level error messages -->
        <div id="login-errors" aria-live="polite" role="alert" hidden></div>


        <form id="login-form" action="#" method="post" novalidate>

            <fieldset>
                <legend>Account sign in</legend>

                <p id="login-form">Sign in with your email and password.</p>

                <label for="email">Email</label>
                <input type="email" name="email" id="email" autocomplete="username" aria-describedby="email-help"
                    required pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$">
                <div id="email-help" class="form-hint">
                    We'll never share your email.
                </div>
                <div id="email-error" class="form-error" role="status" aria-live="polite"></div>

                <label for="password">Password</label>
                <input type="password" name="password" id="password" autocomplete="current-password"
                    aria-describedby="password-help" required minlength="8">
                <div id="password-help" class="form-hint">
                    Minimum 8 characters.
                </div>
                <div id="password-error" class="form-error" role="status" aria-live="polite"></div>

                <button type="submit">Sign in</button>
            </fieldset>
        </form>

        <p><a href="register.html">Create an account</a></p>

        <script>
            // Lightweight client-side validation skeleton (no external libs)
            (function () {
                const form = document.getElementById('login-form');
                const errors = document.getElementById('login-errors');

                form.addEventListener('submit', e => {
                    e.preventDefault();
                    // Clear previous errors
                    errors.hidden = true;
                    errors.textContent = '';

                    // Basic validation (browser attributes also handle this)
                    const email = form.email.value.trim();
                    const password = form.password.value;

                    let hasError = false;
                    if (!email || !/.+@.+\..+/.test(email)) {
                        document.getElementById('email-error').textContent = 'Please enter a valid email.';
                        hasError = true;
                    } else { document.getElementById('email-error').textContent = ''; }

                    if (!password || password.length < 8) {
                        document.getElementById('password-error').textContent = 'Password must be at least 8 characters.';
                        hasError = true;
                    } else { document.getElementById('password-error').textContent = ''; }

                    if (hasError) {
                        errors.hidden = false;
                        errors.textContent = 'Please fix the errors above.';
                        return;
                    }

                    // TODO: call backend API via fetch/axios (csrf + /sanctum/csrf-cookie then POST /api/login)
                    // This file is a semantic/accessibility-first skeleton.
                });
            })();
        </script>

    </main>
</body>

</html>